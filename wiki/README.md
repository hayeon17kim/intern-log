# 📖 인턴위키
## MSA(Micro Service Architecure)

### 개념

SOA(Service Oriented Architecture)의 경량화 버전으로 Monolithic Architecture를 쪼개서 독립적으로 구분한다. 

> Service: 특정 기능의 집합, service의 범위가 중요

14년 초반부터 현재까지 주목받고 있다. 아키텍처 관련 기술 표준은 없으며 SW 벤더들이 기존 제품군(SOA, PaaS, ...)을 Microservices를 지원하기 위한 플랫폼으로서 rebrand하는 추세로 전환되고 있다.

### 배경: Monolithic 아키텍처의 단점

- 일부 모듈의 변경사항 때문에 전체 어플리케이션 개발/운영 프로세스와 패키징에 영향을 준다.
- 모듈별 특성에 맞는 신기술 또는 구조를 적용하기 어렵다.
- 모듈별 확장이 어렵다.

### 특징

- 애플리케이션 로직을 각자 책임이 명확한 작은 컴포넌트들로 분해하고 이를 조합해 솔루션을 제공한다.
- 각 컴포넌트는 작은 책임 영역을 담당하고 완전히 상호 독립적으로 배포된다. 마이크로 서비스를 비즈니스 영역의 한 부분에서만 책임을 담당한다. 그리고 여러 애플리케이션에서 재사용할 수 있어야 한다.
- 서비스 소비자와 서비스 제공자 사이의 데이터 교환을 위해 HTTP와 JSON과 같은 경량 통신 프로토콜을 사용한다.
- 애플리케이션은 항상 기술 중립적 프로토콜을 사용해 통신하므로 서비스 구현 기술과는 무관하다. 이는 마이크로서비스 기반의 애플리케이션을 다양한 언어와 기술로 구축할 수 있다는 것을 의미한다.
- 작고 독립적이며 분산된 마이크로서비스를 사용해 조직은 명확히 정의된 책임 영역을 담당하는 소규모 팀을 보유할 수 있다. 이 팀들은 애플리케이션 출시처럼 하나의 목표를 향해 일하지만, 자기가 개발하는 서비스만 책임진다.

### 장점

- 작은 서비스들로 나누고, 각 서비스를 독립적으로 만듦 → loosely-coupled
- 대용량 분산 환경에 적합
- 복잡도 감소
- 유연한 배포
- 재사용성 → 확장성
- 서비스별 HW/SW 플랫폼/기술 도입 및 확장 용이
- 개발자의 이해 용이, 개발/운영 매 단계의 생산성 향상
- 지속적인 개발/디플로이가 biz capability 단위로 관련된 소수의 인원의 책임 하에 이루어질 수 있다.
- fault isolation

### 단점

- 장애추적, 모니터링, 매시징이 어렵다.
- 여러 서비스에 걸쳐져 있는 feature의 경우, 트랜잭션을 다루기 어렵다.
- 여러 서비스에 걸쳐져 있는 feature의 경우, 테스팅이 복잡하다.
- 서비스간 dependency가 있는 경우 릴리즈가 까다롭다.
- 서비스 개수가 많고 유동적이기 때문에 Continuous Integration/Delivery 및 서비스 관리 상의 문제가 발생할 수 있다.
- monolith로 시작한 시스템을 Microservices로 전환할 때 큰 고통이 수반될 수 있다.


## SRE (Site Reliability Engineering)

> class SRE implements Devops

### 등장 배경

- 개발팀은 주어진 시간 내에 새로운 기능을 내기 위해서 개발 속도에 무게를 두고, 운영팀의 경우 시스템 안정성에 무게를 둔다.
- 개발팀이 무리하게 기능을 배포하면 장애로 이어지고, 이러한 장애로 인해 서로를 욕하는 상황이 발생한다. 그래서 Devops는 이러한 두 팀을 한 팀에 묶어두고 운영하는 문화이자 운영 철학이다.

### Devops와 SRE 차이점

- Devops: 개발과 운영의 분단 현상을 해결하기 위한 방법론이자 하나의 조직문화에 대한 방향성이다.
- SRE: 구글이 Devops에 적용하기 위한 구체적인 practice와 가이드이다.

### SRE가 하는 일

- 지표 정의와 모니터링
- 하드웨어 리소스 가용량 계획
- 형상 변경 관리
- 장애 처리
- 문화 확립

### SRE가 일하는 방식

- 부서 간 단절 줄이기 (오너쉽 공유)
- 정상적으로 실패 받아들이기 (에러 버짓 등의 개념 도입)
- 점진적인 변경 구현 (작은 단위 변경으로 리스크 최소화)
- 자동화 및 툴링 (수작업을 줄여서 리스크 최소화 및 업무 절감)
- 모든 것을 수치화 (지표 뿐만 아니라, 수동 작업시간, 장애시간 등 모든 것을 데이터화)

### SRE의 주요 지표

- SLI(Service Level Indicator): 서비스에 대한 수준을 측정하여 정량적으로 정의한 지표
    - 응답시간
    - 에러율
    - 처리량
    - 가용성
    - 내구성
- SLO (Service Level Objective): SLI로 정의한 지표의 목표 지표
    - 최소/최대 범위 지정
    - 여유 값을 둘 것
    - 과도하게 하지 말 것

## Jenkins

### 개념

소프트웨어 개발 시 지속적인 통합(continuous integration) 서비스를 제공하는 툴이다.

### 배경

이전에는 일정 시간마다 빌드를 실행하는 방식이 일반적이었다. 특히 개발자들이 당일 작성한 소스들의 커밋이 모두 끝난 심야 시간대에 이러한 빌드가 타이머에 의해 집중적으로 진행되었는데, 이를 nightly-build라 한다. 

하지만 젠킨스는 정기적인 빌드에서 한 발 나아가 서브 버전, Git과 같은 버전 관리 시스템과 연동하여 소스의 커밋을 감지하면 자동적으로 자동화 테스트가 포함된 빌드가 작동되도록 설정할 수 있다. 

### 장점

개발 중인 프로젝트에서 커밋을 빈번하게 일어나기 때문에 커밋 횟수만큼 빌드를 실행하는 것이 아니라 작업이 큐잉되어 자신이 실행될 차례를 기다리게 된다. 코드 변경과 함께 이루어지는 이 같은 자동화된 빌드와 테스트 작업들은 다음과 같은 이점을 가져다준다.

- 각종 배치 작업의 간략화: DB 구축, 애플리케이션 서버로의 Deploy, 라이브러리 릴리즈와 같이 이전에는 CLI로 실행되던 작업이 덕분에 웹 인터페이스로 쉽게 가능해졌다.
- Build 자동화의 확립
- 빌드 파이프라인 구성
- 자동화 테스트: 젠킨스는 Subversion이나 Git과 같은 버전 관리 시스템과 연동하여 코드 변경을 감지하고 자동화 테스트를 수행하기 때문에 개인이 미처 실시하지 못한 테스트가 있다 해도 든든한 안전망이 되어준다.
- 코드 표준 준수 여부 검사

## Git Flow

### 개념

- 일반적인 경우에 적절하고 효율적인 **형상 관리 전략**이다.

    일반적인 경우에 효율적이고 변화에 유연하게 대처할 수 있게 하는 서버 프로그램 구성에 대한 MVC 패턴과 같다.

- **소스 코드 형상/이력 관리를 효율적으로 하고 협업할 때 발생할 수 있는 문제점을 최소화**할 수 있는 **전략**을 말한다.

    ![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0fc16282-c14a-4f9c-8306-5aee40a1a48b/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0fc16282-c14a-4f9c-8306-5aee40a1a48b/Untitled.png)

### 각 branch

- **master branch**
    - **배포**되었거나 배포될 소스가 저장되는 브랜치
    - 배포가 될 때마다 태그만 달아주는 형식으로 관리한다.
    - 언제든 원하는 버전의 소스를 받아볼 수 잇게 하는 역할을 한다.
- **develop branch**
    - 다음 배포를 위해 **개발**을 진행하는 브랜치
    - 여러 명의 개발자가 함께 공유하면서 개발을 진행하는 브랜치
- **feature branch**
    - 각 개발자에 의해 **기능 단위 개발**이 진행되는 브랜치
    - 개발자들이 각각 개발하는 기능은 개발하기 전에 remote repository에 develop branch로부터 자신의 로컬에 브랜치를 따로 생성해서 개발을 진행하고, 로컬 브랜치에서 개발이 완료되면 완료된 소스를 develop 브랜치에 푸시하거나 PullRequest를 보내서 내부적인 코드 리뷰 후에 merge하는 것을 통해 개발이 진행된다.
    - ex) 회원가입 기능을 개발해야 한다면 remote repository에 develop 브랜치로부터 회원가입 기능을 위한 브랜치를 로컬에 생성해서 진행한다. 중간에 "domain 생성", "db 연동", "암호화 적용" 등의 commit 메시지를 남길 것이고, 완료되면 remote repository의 develop 브랜치로 merge 되고 이 브랜치는 사라진다.
- **hotfixs branch**
    - 배포 버전에 생긴 문제로 **긴급한 트러블슈팅**이 필요할 때 개발이 진행되는 브랜치
- **release branch**
    - **내부적으로 배포할 준비**가 되었다고 생각하는 소스가 저장되는 브랜치

## Tunneling

### 개념

- 데이터 스트림을 인터넷 상에서 가상의 파이프를 통해 전달시키는 기술
- 컴퓨터 네트워크에서 터널링 프로토콜을 사용하면 네트워크 사용자는 기본 네트워크가 직접 제공하지 않는 네트워크 서비스에 접근하거나 제공할 수 있다.

### 특징

- 호스트와 호스트 사이에 통신이 어떤 프로토콜을 사용하던 간에 일단 터널이 구성되면 그 안에 원래 내용물(패킷)은 감싸지기(캡슐화) 때문에 내용물이 무엇인가는 중요하지 않게 된다.

### 캡슐화와 터널링

- 캡슐화는 OSI 7 계층을 참조하여 통신을 하기 위해 하위 계층에서 상위 계층 데이터를 포장하는 개념이다.
- 터널링은 계층이 동일하거나 하위의 다른 프로토콜을 숨기기 위해 사우이에서 데이터를 캡슐화하고, 외부 네트워크를 통과하여 목적지에 도착한 뒤 다시 디슐화(Decapsulation)까지 하는 모든 통신 과정을 일컫는 말이다.

### 구성요소

- Passenger(승객) 프로토콜: 캡슐화가 되어야 할 프로토콜들
- Carrier(전달) 프로토콜: 캡슐화 시킬 프로토콜
- Transport(전송) 프로토콜: 전달 프로토콜을 끌고 갈 프로토콜

### 과정

내부 네트워크에서만 사용되는 Passenger 프로토콜을 Carrier 프로토콜의 데이터 안으로 집어넣은 뒤 Transport 프로토콜을 통해 목적지로 이동시킨다. 그리고 목적지에 도착하면 디캡슐화해 Carrier 프로토콜 안에 들어있던 Passenger 을 동작시켜서 원하는 목적지로 이동한다.

## DocumentDB

- AWS에서 제공하는 NoSQL 기반의 데이터베이스 서비스이다.
- MongoDB와 기능적으로 큰 차이가 없다.

## homebrew-cask

Homebrew의 확장이다. Homebrew는 패키지를 터미널(쉘)에서 command를 입력하는 것만으로도 설치해준다. Homebrew-cask는 GUI 즉 맥의 응용프로그램을 코맨드로 설치할 수 잇도록 해주는 편리한 기능이다.
