# 인턴위키

## MSA(Micro Service Architecure)

### 개념

SOA(Service Oriented Architecture)의 경량화 버전으로 Monolithic Architecture를 쪼개서 독립적으로 구분한다. 

> Service: 특정 기능의 집합, service의 범위가 중요

14년 초반부터 현재까지 주목받고 있다. 아키텍처 관련 기술 표준은 없으며 SW 벤더들이 기존 제품군(SOA, PaaS, ...)을 Microservices를 지원하기 위한 플랫폼으로서 rebrand하는 추세로 전환되고 있다.

### 배경: Monolithic 아키텍처의 단점

- 일부 모듈의 변경사항 때문에 전체 어플리케이션 개발/운영 프로세스와 패키징에 영향을 준다.
- 모듈별 특성에 맞는 신기술 또는 구조를 적용하기 어렵다.
- 모듈별 확장이 어렵다.

### 특징

- 애플리케이션 로직을 각자 책임이 명확한 작은 컴포넌트들로 분해하고 이를 조합해 솔루션을 제공한다.
- 각 컴포넌트는 작은 책임 영역을 담당하고 완전히 상호 독립적으로 배포된다. 마이크로 서비스를 비즈니스 영역의 한 부분에서만 책임을 담당한다. 그리고 여러 애플리케이션에서 재사용할 수 있어야 한다.
- 서비스 소비자와 서비스 제공자 사이의 데이터 교환을 위해 HTTP와 JSON과 같은 경량 통신 프로토콜을 사용한다.
- 애플리케이션은 항상 기술 중립적 프로토콜을 사용해 통신하므로 서비스 구현 기술과는 무관하다. 이는 마이크로서비스 기반의 애플리케이션을 다양한 언어와 기술로 구축할 수 있다는 것을 의미한다.
- 작고 독립적이며 분산된 마이크로서비스를 사용해 조직은 명확히 정의된 책임 영역을 담당하는 소규모 팀을 보유할 수 있다. 이 팀들은 애플리케이션 출시처럼 하나의 목표를 향해 일하지만, 자기가 개발하는 서비스만 책임진다.

### 장점

- 작은 서비스들로 나누고, 각 서비스를 독립적으로 만듦 → loosely-coupled
- 대용량 분산 환경에 적합
- 복잡도 감소
- 유연한 배포
- 재사용성 → 확장성
- 서비스별 HW/SW 플랫폼/기술 도입 및 확장 용이
- 개발자의 이해 용이, 개발/운영 매 단계의 생산성 향상
- 지속적인 개발/디플로이가 biz capability 단위로 관련된 소수의 인원의 책임 하에 이루어질 수 있다.
- fault isolation

### 단점

- 장애추적, 모니터링, 매시징이 어렵다.
- 여러 서비스에 걸쳐져 있는 feature의 경우, 트랜잭션을 다루기 어렵다.
- 여러 서비스에 걸쳐져 있는 feature의 경우, 테스팅이 복잡하다.
- 서비스간 dependency가 있는 경우 릴리즈가 까다롭다.
- 서비스 개수가 많고 유동적이기 때문에 Continuous Integration/Delivery 및 서비스 관리 상의 문제가 발생할 수 있다.
- monolith로 시작한 시스템을 Microservices로 전환할 때 큰 고통이 수반될 수 있다.


# SRE (Site Reliability Engineering)

> class SRE implements Devops

### 등장 배경

- 개발팀은 주어진 시간 내에 새로운 기능을 내기 위해서 개발 속도에 무게를 두고, 운영팀의 경우 시스템 안정성에 무게를 둔다.
- 개발팀이 무리하게 기능을 배포하면 장애로 이어지고, 이러한 장애로 인해 서로를 욕하는 상황이 발생한다. 그래서 Devops는 이러한 두 팀을 한 팀에 묶어두고 운영하는 문화이자 운영 철학이다.

### Devops와 SRE 차이점

- Devops: 개발과 운영의 분단 현상을 해결하기 위한 방법론이자 하나의 조직문화에 대한 방향성이다.
- SRE: 구글이 Devops에 적용하기 위한 구체적인 practice와 가이드이다.

### SRE가 하는 일

- 지표 정의와 모니터링
- 하드웨어 리소스 가용량 계획
- 형상 변경 관리
- 장애 처리
- 문화 확립

### SRE가 일하는 방식

- 부서 간 단절 줄이기 (오너쉽 공유)
- 정상적으로 실패 받아들이기 (에러 버짓 등의 개념 도입)
- 점진적인 변경 구현 (작은 단위 변경으로 리스크 최소화)
- 자동화 및 툴링 (수작업을 줄여서 리스크 최소화 및 업무 절감)
- 모든 것을 수치화 (지표 뿐만 아니라, 수동 작업시간, 장애시간 등 모든 것을 데이터화)

### SRE의 주요 지표

- SLI(Service Level Indicator): 서비스에 대한 수준을 측정하여 정량적으로 정의한 지표
    - 응답시간
    - 에러율
    - 처리량
    - 가용성
    - 내구성
- SLO (Service Level Objective): SLI로 정의한 지표의 목표 지표
    - 최소/최대 범위 지정
    - 여유 값을 둘 것
    - 과도하게 하지 말 것
